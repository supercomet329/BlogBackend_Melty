webpackJsonp([17],{"/OW9":function(o,t,e){"use strict";function s(o){return o&&o.__esModule?o:{default:o}}Object.defineProperty(t,"__esModule",{value:!0});var i=e("cs8/"),a=s(i),n=e("NXNv"),r=s(n),c=e("SLXF"),l=s(c),u=e("qm2k"),m=s(u),k=e("XxWu"),h=s(k),N=e("63Js"),d=s(N),b=e("P9l9");t.default={data:function(){return{bookNotes:[],categorys:void 0,top_category:void 0,limit_size:10,bookNotesTimeSorted:!1,bookNotesMostComment:void 0,bookNotesRecommend:void 0,bookNotesPage:0,bookNotesTotalCount:0,noMorebookNotesData:!1,bookNotesMenus:[{title:"顺序",selectedTitle:"逆序",selected:!0,method:"timeSorted"},{title:"评论最多",selected:!1,method:"mostComment"},{title:"推荐",selected:!1,method:"recommend"}],bookNotesDatePickerOptions:{disabledDate:function(o){return o&&o.valueOf()>Date.now()},shortcuts:[{text:"近一周",value:function(){var o=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,o]}},{text:"近一个月",value:function(){var o=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,o]}},{text:"近三个月",value:function(){var o=new Date,t=new Date;return t.setTime(t.getTime()-7776e6),[t,o]}},{text:"近一年",value:function(){var o=new Date,t=new Date;return t.setTime(t.getTime()-31536e6),[t,o]}}]},bookNotesSelectedDateRange:[]}},created:function(){this.top_category=parseInt(this.$route.params.id),this.getDatas()},methods:{selectCategory:function(o){this.top_category=o,this.bookNotesTimeSorted=!1,this.bookNotesMostComment=void 0,this.bookNotesRecommend=void 0,this.bookNotesPage=0,this.bookNotes=[],this.bookNotesTotalCount=0,this.noMoreBookNotesData=!1,this.bookNotesSelectedDateRange=[],this.getBookNoteBaseInfo()},getDatas:function(){this.getCategorys(),this.getBookNoteBaseInfo()},getCategorys:function(){var o=this;(0,b.getCategorys)({params:{level_min:1,level_max:1,id:this.$Window.__category_info__.reading}}).then(function(t){o.categorys=t.data.results}).catch(function(o){console.log(o)})},getBookNoteBaseInfo:function(){var o=this;if(!this.noMoreBookNotesData){var t=[];this.bookNotesTimeSorted?t.push("add_time"):t.push("-add_time"),void 0!==this.bookNotesMostComment&&(this.bookNotesMostComment?t.push("comment_num"):t.push("-comment_num")),(0,b.getBookNoteBaseInfo)({params:{top_category:this.top_category,ordering:t.toString(),is_recommend:!1,time_min:this.bookNotesSelectedDateRange[0],time_max:this.bookNotesSelectedDateRange[1],limit:this.limit_size,offset:this.bookNotesPage*this.limit_size}}).then(function(t){o.bookNotes=o.bookNotes.concat(t.data.results),o.bookNotesTotalCount+=t.data.results.length,o.noMoreBookNotesData=o.bookNotesTotalCount>=t.data.count,o.$refs.browseMoreBookNotes.stopLoading(o.noMoreBookNotesData)}).catch(function(o){console.log(o)})}},browseMoreBookNotes:function(){console.log("getBookNoteBaseInfo"),this.bookNotesPage++,this.getBookNoteBaseInfo()},refreshBookNotes:function(){this.top_category=parseInt(this.$route.params.id),this.bookNotesTimeSorted=!1,this.bookNotesMostComment=void 0,this.bookNotesRecommend=void 0,this.bookNotesPage=0,this.bookNotes=[],this.bookNotesTotalCount=0,this.noMoreBookNotesData=!1,this.bookNotesSelectedDateRange=[],this.getCategorys(),this.getBookNoteBaseInfo()},bookNotesMenusControl:function(o){switch(o[0]){case"timeSorted":this.bookNotesTimeSorted=!o[1];break;case"mostComment":this.bookNotesMostComment=o[1];break;case"recommend":this.bookNotesRecommend=o[1]}this.bookNotesPage=0,this.bookNotes=[],this.bookNotesTotalCount=0,this.noMoreBookNotesData=!1,this.getBookNoteBaseInfo()},bookNotesDateSelect:function(o){this.bookNotesSelectedDateRange=o,this.bookNotesPage=0,this.limit_size=10,this.bookNotes=[],this.bookNotesTotalCount=0,this.noMoreBooksData=!1,this.getBookNoteBaseInfo()},bookNotesDateSelectClear:function(){this.bookNotesSelectedDateRange=[],this.bookNotesPage=0,this.limit_size=10,this.bookNotes=[],this.bookNotesTotalCount=0,this.noMoreBookNotesData=!1,this.getBookNoteBaseInfo()}},components:{"book-note-cell":a.default,"classify-menu":r.default,"section-title":l.default,recommend:m.default,"tag-wall":h.default,"browse-more":d.default}}},UDu9:function(o,t,e){var s=e("tqyD");"string"==typeof s&&(s=[[o.i,s,""]]),s.locals&&(o.exports=s.locals);e("rjj0")("5c8bd924",s,!0)},"X/R8":function(o,t,e){"use strict";function s(o){e("UDu9")}Object.defineProperty(t,"__esModule",{value:!0});var i=e("/OW9"),a=e.n(i);for(var n in i)"default"!==n&&function(o){e.d(t,o,function(){return i[o]})}(n);var r=e("iNlA"),c=e("VU/8"),l=s,u=c(a.a,r.a,!1,l,null,null);t.default=u.exports},iNlA:function(o,t,e){"use strict";var s=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",{staticClass:"book-note-list-content layout-content"},[e("iv-row",[e("iv-col",{attrs:{xs:24,sm:24,md:24,lg:17}},[e("div",{staticClass:"layout-left"},[e("classify-menu",{attrs:{categorys:o.categorys,defaultCategory:o.top_category},on:{selectCategory:o.selectCategory}}),o._v(" "),e("iv-affix",{staticStyle:{position:"relative","z-index":"12"}},[e("section-title",{attrs:{mainTitle:"笔记列表",subTitle:"Book Notes",menus:o.bookNotesMenus,withRefresh:!0,withTimeSelect:!0,datePickerOptions:o.bookNotesDatePickerOptions},on:{refresh:o.refreshBookNotes,menusControl:o.bookNotesMenusControl,comfirmDateSelect:o.bookNotesDateSelect,clearDateSelect:o.bookNotesDateSelectClear}})],1),o._v(" "),o._l(o.bookNotes,function(o){return e("book-note-cell",{key:o.id,attrs:{bookNote:o}})}),o._v(" "),e("browse-more",{ref:"browseMoreBookNotes",on:{browseMore:o.browseMoreBookNotes}})],2)]),o._v(" "),e("iv-col",{attrs:{xs:0,sm:0,md:0,lg:7}},[e("div",{staticClass:"layout-right"},[e("recommend"),o._v(" "),e("tag-wall",{staticStyle:{"margin-top":"15px"}})],1)])],1)],1)},i=[],a={render:s,staticRenderFns:i};t.a=a},tqyD:function(o,t,e){t=o.exports=e("FZ+f")(!0),t.push([o.i,"","",{version:3,sources:[],names:[],mappings:"",file:"BookNoteListContent.vue",sourceRoot:""}])}});