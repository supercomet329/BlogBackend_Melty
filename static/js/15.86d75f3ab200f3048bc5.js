webpackJsonp([15],{"//e3":function(o,e,t){"use strict";var s=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"read-home-content layout-content"},[t("iv-row",[t("iv-col",{attrs:{xs:24,sm:24,md:24,lg:17}},[t("div",{staticClass:"layout-left"},[t("classify-menu",{attrs:{categorys:o.categorys,defaultCategory:o.top_category},on:{selectCategory:o.selectCategory}}),o._v(" "),t("iv-affix",{staticStyle:{position:"relative","z-index":"12"}},[t("section-title",{attrs:{mainTitle:"图书列表",subTitle:"Books",menus:o.booksMenus,withRefresh:!0,withTimeSelect:!0,datePickerOptions:o.booksDatePickerOptions},on:{refresh:o.refreshBooks,menusControl:o.booksMenusControl,comfirmDateSelect:o.booksDateSelect,clearDateSelect:o.booksDateSelectClear}})],1),o._v(" "),o._l(o.books,function(o){return t("book-cell",{key:o.id,attrs:{book:o}})}),o._v(" "),t("browse-more",{ref:"browseMoreBooks",on:{browseMore:o.browseMoreBooks}}),o._v(" "),t("iv-affix",{staticStyle:{position:"relative","z-index":"12"}},[t("section-title",{attrs:{mainTitle:"笔记列表",subTitle:"Book Notes",menus:o.bookNotesMenus,withRefresh:!0,withTimeSelect:!0,datePickerOptions:o.bookNotesDatePickerOptions},on:{refresh:o.refreshBookNotes,menusControl:o.bookNotesMenusControl,comfirmDateSelect:o.bookNotesDateSelect,clearDateSelect:o.bookNotesDateSelectClear}})],1),o._v(" "),o._l(o.bookNotes,function(o){return t("book-note-cell",{key:o.id,attrs:{bookNote:o}})}),o._v(" "),t("browse-more",{ref:"browseMoreBookNotes",on:{browseMore:o.browseMoreBookNotes}})],2)]),o._v(" "),t("iv-col",{attrs:{xs:0,sm:0,md:0,lg:7}},[t("div",{staticClass:"layout-right"},[t("recommend"),o._v(" "),t("tag-wall",{staticStyle:{"margin-top":"15px"}})],1)])],1)],1)},i=[],a={render:s,staticRenderFns:i};e.a=a},"3YL1":function(o,e,t){var s=t("Jz9X");"string"==typeof s&&(s=[[o.i,s,""]]),s.locals&&(o.exports=s.locals);t("rjj0")("6a290c11",s,!0)},Jz9X:function(o,e,t){e=o.exports=t("FZ+f")(!0),e.push([o.i,"","",{version:3,sources:[],names:[],mappings:"",file:"ReadListContent.vue",sourceRoot:""}])},Xfke:function(o,e,t){"use strict";function s(o){t("3YL1")}Object.defineProperty(e,"__esModule",{value:!0});var i=t("blP3"),a=t.n(i);for(var n in i)"default"!==n&&function(o){t.d(e,o,function(){return i[o]})}(n);var r=t("//e3"),c=t("VU/8"),l=s,k=c(a.a,r.a,!1,l,null,null);e.default=k.exports},blP3:function(o,e,t){"use strict";function s(o){return o&&o.__esModule?o:{default:o}}Object.defineProperty(e,"__esModule",{value:!0});var i=t("nGNg"),a=s(i),n=t("cs8/"),r=s(n),c=t("NXNv"),l=s(c),k=t("SLXF"),m=s(k),h=t("qm2k"),u=s(h),b=t("XxWu"),d=s(b),f=t("63Js"),g=s(f),N=t("P9l9");e.default={data:function(){return{books:[],bookNotes:[],categorys:void 0,top_category:void 0,limit_size:10,booksTimeSorted:!1,booksMostComment:void 0,booksRecommend:void 0,booksPage:0,booksTotalCount:0,noMoreBooksData:!1,booksMenus:[{title:"顺序",selectedTitle:"逆序",selected:!0,method:"timeSorted"},{title:"评论最多",selected:!1,method:"mostComment"},{title:"推荐",selected:!1,method:"recommend"}],booksDatePickerOptions:{disabledDate:function(o){return o&&o.valueOf()>Date.now()},shortcuts:[{text:"近一周",value:function(){var o=new Date,e=new Date;return e.setTime(e.getTime()-6048e5),[e,o]}},{text:"近一个月",value:function(){var o=new Date,e=new Date;return e.setTime(e.getTime()-2592e6),[e,o]}},{text:"近三个月",value:function(){var o=new Date,e=new Date;return e.setTime(e.getTime()-7776e6),[e,o]}},{text:"近一年",value:function(){var o=new Date,e=new Date;return e.setTime(e.getTime()-31536e6),[e,o]}}]},booksSelectedDateRange:[],bookNotesTimeSorted:!1,bookNotesMostComment:void 0,bookNotesRecommend:void 0,bookNotesPage:0,bookNotesTotalCount:0,noMorebookNotesData:!1,bookNotesMenus:[{title:"顺序",selectedTitle:"逆序",selected:!0,method:"timeSorted"},{title:"评论最多",selected:!1,method:"mostComment"},{title:"推荐",selected:!1,method:"recommend"}],bookNotesDatePickerOptions:{disabledDate:function(o){return o&&o.valueOf()>Date.now()},shortcuts:[{text:"近一周",value:function(){var o=new Date,e=new Date;return e.setTime(e.getTime()-6048e5),[e,o]}},{text:"近一个月",value:function(){var o=new Date,e=new Date;return e.setTime(e.getTime()-2592e6),[e,o]}},{text:"近三个月",value:function(){var o=new Date,e=new Date;return e.setTime(e.getTime()-7776e6),[e,o]}},{text:"近一年",value:function(){var o=new Date,e=new Date;return e.setTime(e.getTime()-31536e6),[e,o]}}]},bookNotesSelectedDateRange:[]}},created:function(){this.top_category=parseInt(this.$route.params.id),this.getDatas()},methods:{selectCategory:function(o){this.top_category=o,this.booksTimeSorted=!1,this.booksMostComment=void 0,this.booksRecommend=void 0,this.booksPage=0,this.books=[],this.booksTotalCount=0,this.noMoreBooksData=!1,this.booksSelectedDateRange=[],this.bookNotesTimeSorted=!1,this.bookNotesMostComment=void 0,this.bookNotesRecommend=void 0,this.bookNotesPage=0,this.bookNotes=[],this.bookNotesTotalCount=0,this.noMoreBookNotesData=!1,this.bookNotesSelectedDateRange=[],this.getBookBaseInfo(),this.getBookNoteBaseInfo()},getDatas:function(){this.getCategorys(),this.getBookBaseInfo(),this.getBookNoteBaseInfo()},getCategorys:function(){var o=this;(0,N.getCategorys)({params:{level_min:1,level_max:1,id:this.$Window.__category_info__.reading}}).then(function(e){o.categorys=e.data.results}).catch(function(o){console.log(o)})},getBookBaseInfo:function(){var o=this;if(!this.noMoreBooksData){var e=[];this.booksTimeSorted?e.push("add_time"):e.push("-add_time"),void 0!==this.booksMostComment&&(this.booksMostComment?e.push("comment_num"):e.push("-comment_num")),(0,N.getBookBaseInfo)({params:{top_category:this.top_category,ordering:e.toString(),is_recommend:!1,time_min:this.booksSelectedDateRange[0],time_max:this.booksSelectedDateRange[1],limit:this.limit_size,offset:this.booksPage*this.limit_size}}).then(function(e){o.books=o.books.concat(e.data.results),o.booksTotalCount+=e.data.results.length,o.noMoreBooksData=o.booksTotalCount>=e.data.count,o.$refs.browseMoreBooks.stopLoading(o.noMoreBooksData)}).catch(function(o){console.log(o)})}},browseMoreBooks:function(){console.log("browseMoreBooks"),this.booksPage++,this.getBookBaseInfo()},refreshBooks:function(){this.top_category=parseInt(this.$route.params.id),this.booksTimeSorted=!1,this.booksMostComment=void 0,this.booksRecommend=void 0,this.booksPage=0,this.books=[],this.booksTotalCount=0,this.noMoreBooksData=!1,this.booksSelectedDateRange=[],this.getCategorys(),this.getBookBaseInfo()},booksMenusControl:function(o){switch(o[0]){case"timeSorted":this.booksTimeSorted=!o[1];break;case"mostComment":this.booksMostComment=o[1];break;case"recommend":this.booksRecommend=o[1]}this.booksPage=0,this.books=[],this.booksTotalCount=0,this.noMoreBooksData=!1,this.getBookBaseInfo()},booksDateSelect:function(o){this.booksSelectedDateRange=o,this.booksPage=0,this.limit_size=10,this.books=[],this.booksTotalCount=0,this.noMoreBooksData=!1,this.getBookBaseInfo()},booksDateSelectClear:function(){this.booksSelectedDateRange=[],this.booksPage=0,this.limit_size=10,this.books=[],this.booksTotalCount=0,this.noMoreBooksData=!1,this.getBookBaseInfo()},getBookNoteBaseInfo:function(){var o=this;if(!this.noMoreBookNotesData){var e=[];this.bookNotesTimeSorted?e.push("add_time"):e.push("-add_time"),void 0!==this.bookNotesMostComment&&(this.bookNotesMostComment?e.push("comment_num"):e.push("-comment_num")),(0,N.getBookNoteBaseInfo)({params:{top_category:this.top_category,ordering:e.toString(),is_recommend:!1,time_min:this.bookNotesSelectedDateRange[0],time_max:this.bookNotesSelectedDateRange[1],limit:this.limit_size,offset:this.bookNotesPage*this.limit_size}}).then(function(e){o.bookNotes=o.bookNotes.concat(e.data.results),o.bookNotesTotalCount+=e.data.results.length,o.noMoreBookNotesData=o.bookNotesTotalCount>=e.data.count,o.$refs.browseMoreBookNotes.stopLoading(o.noMoreBookNotesData)}).catch(function(o){console.log(o)})}},browseMoreBookNotes:function(){console.log("getBookNoteBaseInfo"),this.bookNotesPage++,this.getBookNoteBaseInfo()},refreshBookNotes:function(){this.top_category=parseInt(this.$route.params.id),this.bookNotesTimeSorted=!1,this.bookNotesMostComment=void 0,this.bookNotesRecommend=void 0,this.bookNotesPage=0,this.bookNotes=[],this.bookNotesTotalCount=0,this.noMoreBookNotesData=!1,this.bookNotesSelectedDateRange=[],this.getCategorys(),this.getBookNoteBaseInfo()},bookNotesMenusControl:function(o){switch(o[0]){case"timeSorted":this.bookNotesTimeSorted=!o[1];break;case"mostComment":this.bookNotesMostComment=o[1];break;case"recommend":this.bookNotesRecommend=o[1]}this.bookNotesPage=0,this.bookNotes=[],this.bookNotesTotalCount=0,this.noMoreBookNotesData=!1,this.getBookNoteBaseInfo()},bookNotesDateSelect:function(o){this.bookNotesSelectedDateRange=o,this.bookNotesPage=0,this.limit_size=10,this.bookNotes=[],this.bookNotesTotalCount=0,this.noMoreBooksData=!1,this.getBookNoteBaseInfo()},bookNotesDateSelectClear:function(){this.bookNotesSelectedDateRange=[],this.bookNotesPage=0,this.limit_size=10,this.bookNotes=[],this.bookNotesTotalCount=0,this.noMoreBookNotesData=!1,this.getBookNoteBaseInfo()}},components:{"book-cell":a.default,"book-note-cell":r.default,"classify-menu":l.default,"section-title":m.default,recommend:u.default,"tag-wall":d.default,"browse-more":g.default}}}});